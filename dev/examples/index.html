<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Examples · SolverLogging.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><script src="../../copy.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SolverLogging.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../api/">API</a></li><li class="is-active"><a class="tocitem" href>Examples</a><ul class="internal"><li><a class="tocitem" href="#Setting-up-a-Logger"><span>Setting up a Logger</span></a></li><li><a class="tocitem" href="#Conditional-Formatting"><span>Conditional Formatting</span></a></li><li><a class="tocitem" href="#Saving-to-a-File"><span>Saving to a File</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Examples</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Examples</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/bjack205/SolverLogging.jl/blob/master/docs/src/examples.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="examples_section"><a class="docs-heading-anchor" href="#examples_section">Examples</a><a id="examples_section-1"></a><a class="docs-heading-anchor-permalink" href="#examples_section" title="Permalink"></a></h1><h2 id="Setting-up-a-Logger"><a class="docs-heading-anchor" href="#Setting-up-a-Logger">Setting up a Logger</a><a id="Setting-up-a-Logger-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-up-a-Logger" title="Permalink"></a></h2><p>The <a href="../#Quickstart">Quickstart</a> used the default logger provided by this package. It&#39;s  usually a better idea to have your own local logger you can use, to avoid  possible conflicts. </p><pre><code class="language-julia hljs">using SolverLogging
logger = SolverLogging.Logger()
setentry(logger, &quot;iter&quot;, Int, width=5)
setentry(logger, &quot;cost&quot;)
setentry(logger, &quot;dJ&quot;, level=2)
setentry(logger, &quot;info&quot;, String, width=25)</code></pre><p>We can change a few things about the behavior of our logger by accessing the  logger options. Here we change the header print frequency to print every 5  iterations instead of the default 10, eliminate the line under the header, and set the header to print in bold yellow:</p><pre><code class="language-julia hljs">using Crayons
logger.opts.freq = 5
logger.opts.linechar = &#39;\0&#39;
logger.opts.headerstyle = crayon&quot;bold yellow&quot;;</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">\e[33;1m</code></pre><p>If we set the verbosity to 1 and print, we&#39;ll see that it doesn&#39;t print the <code>dJ</code> field:</p><pre><code class="language-julia hljs">setlevel!(logger, 1)
Jprev = 100
for iter = 1:3
    global Jprev
    J = 100/iter
    @log logger iter
    @log logger &quot;cost&quot; J
    @log logger &quot;dJ&quot; Jprev - J  # note this is disregarded
    Jprev = J
    if iter == 5
        @log logger &quot;info&quot; &quot;Last Iteration&quot;
    end
    printlog(logger)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">iter cost      info
1    1.00e+02
2    5.00e+01
3    3.33e+01</code></pre><p>If we change the verbosity to 2, we now see <code>dJ</code> printed out:</p><pre><code class="language-julia hljs">setlevel!(logger, 2)  # note the change to 2
Jprev = 100
for iter = 1:5
    global Jprev
    J = 100/iter
    @log logger iter
    @log logger &quot;cost&quot; J
    @log logger &quot;dJ&quot; Jprev - J
    Jprev = J
    if iter == 5
        @log logger &quot;info&quot; &quot;Last Iteration&quot;
    end
    printlog(logger)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1    1.00e+02  0.00e+00
2    5.00e+01  5.00e+01
iter cost      dJ        info
3    3.33e+01  1.67e+01
4    2.50e+01  8.33e+00
5    2.00e+01  5.00e+00  Last Iteration</code></pre><p>Note how the new output doesn&#39;t start with a header, since it&#39;s continuing the  count from before. We can change this by resetting the count with <a href="../api/#SolverLogging.resetcount!"><code>resetcount!</code></a>:</p><pre><code class="language-julia hljs">setlevel!(logger, 1)               # note the change back to 1
SolverLogging.resetcount!(logger)  # this resets the print count
Jprev = 100
for iter = 1:5
    global Jprev
    J = 100/iter
    @log logger iter
    @log logger &quot;cost&quot; J
    @log logger &quot;dJ&quot; Jprev - J
    Jprev = J
    if iter == 5
        @log logger &quot;info&quot; &quot;Last Iteration&quot;
    end
    printlog(logger)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">iter cost      info
1    1.00e+02  Last Iteration
2    5.00e+01  Last Iteration
3    3.33e+01  Last Iteration
4    2.50e+01  Last Iteration
5    2.00e+01  Last Iteration</code></pre><p>So that, as you can see, we now get a nice output with the header at the top. By  changing the verbosity level back to 1, you see that it got rid of the <code>dJ</code> column  again.</p><h2 id="Conditional-Formatting"><a class="docs-heading-anchor" href="#Conditional-Formatting">Conditional Formatting</a><a id="Conditional-Formatting-1"></a><a class="docs-heading-anchor-permalink" href="#Conditional-Formatting" title="Permalink"></a></h2><p>In this example we cover how to use the conditional formatting. Lets say we have a field <code>tol</code> that we want below <code>1e-6</code>. We also have another field <code>control</code> that  we want to be &quot;good&quot; if it&#39;s absolute value is less than 1, and &quot;bad&quot; if it&#39;s  greater than 10.</p><p>We create 2 <a href="../api/#SolverLogging.ConditionalCrayon"><code>ConditionalCrayon</code></a> types to encode this behavior. Our first one can be covered using the constructor that takes a <code>lo</code> and <code>hi</code> value:</p><pre><code class="language-julia hljs">using SolverLogging
ccrayon_tol = ConditionalCrayon(1e-6,Inf, reverse=false)</code></pre><p>Which by default will consider any values less than <code>lo</code> good and any values greater than <code>hi</code> bad. We can reverse this with the optional <code>reverse</code> keyword.</p><p>For our control formatting, let&#39;s say we want it to print orange if it&#39;s absolute  value is in between 1 and 10 and cyan if it&#39;s less than 1:</p><pre><code class="language-julia hljs">using Crayons
goodctrl = x-&gt;abs(x) &lt; 1
badctrl = x-&gt;abs(x) &gt; 10
lowcolor = crayon&quot;blue&quot;
defcolor = crayon&quot;208&quot;  # the ANSI color for a dark orange.
ccrayon_control = ConditionalCrayon(badctrl, goodctrl,
    defaultcolor=defcolor, goodcolor=crayon&quot;cyan&quot;)</code></pre><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>Use <code>Crayons.test_256_colors()</code> to generate a sample of all the ANSI color codes.</p></div></div><p>We can now specify these when we set up our fields:</p><pre><code class="language-julia hljs">logger = SolverLogging.Logger()
setentry(logger, &quot;iter&quot;, Int, width=5)
setentry(logger, &quot;tol&quot;, Float64, ccrayon=ccrayon_tol)
setentry(logger, &quot;ctrl&quot;, Float64, fmt=&quot;%.1f&quot;, ccrayon=ccrayon_control)</code></pre><p>We should see the desired behavior when we print out some test values:</p><pre><code class="language-julia hljs">for iter = 1:10
    tol = exp10(-iter)
    ctrl = 0.1*(iter-1)*iter^2
    @log logger iter
    @log logger tol
    @log logger ctrl
    printlog(logger)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">iter tol       ctrl
—————————————————————————
1    1.00e-01  0.0
2    1.00e-02  0.4
3    1.00e-03  1.8
4    1.00e-04  4.8
5    1.00e-05  10.0
6    1.00e-06  18.0
7    1.00e-07  29.4
8    1.00e-08  44.8
9    1.00e-09  64.8
10   1.00e-10  90.0</code></pre><h2 id="Saving-to-a-File"><a class="docs-heading-anchor" href="#Saving-to-a-File">Saving to a File</a><a id="Saving-to-a-File-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-to-a-File" title="Permalink"></a></h2><p>Instead of writing to <code>stdout</code>, we can write a to a file. This interface is exactly the same, but we pass a filename or an <code>IOStream</code> to the logger when we create it:</p><pre><code class="nohighlight hljs">using SolverLogging
filename = &quot;log.out&quot;
logger = SolverLogging.Logger(filename)</code></pre><p>Note that this will automatically open the file with read privileges, overwritting  any contents in the file. The stream is flushed after every write so it should  populate the contents of the file in real time.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../api/">« API</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.12 on <span class="colophon-date" title="Wednesday 23 February 2022 22:10">Wednesday 23 February 2022</span>. Using Julia version 1.6.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
